<!DOCTYPE html>
<html lang="en">
<head>

    {{template "header" .}}

    <title>Panda-DB | Genome Browser</title>
    <!-- 导入igv2.10.5 -->
    <script src="https://cdn.jsdelivr.net/npm/igv@2.10.5/dist/igv.min.js"></script>
    <!-- Data manipulat -->
    <script src="../static/js/listGenerate.js" type="text/javascript"></script>
</head>
<body>
    {{template "navigation" .}}

<div class="container">
    <h2 class="page-title-txt">Genome Browser</h2>
</div>

<div class="container browser-row well">
    <div class="row">
        <div class="col-lg-4 col-lg-offset-1 col-md-4 col-sm-12" style="margin-left: 5.5%">
            <h3>"reference strain"</h3>
            <form class="form-inline pull-xs-right">
                <input autocomplete="off" class="form-control" id="filter" placeholder="etc...."
                style="width:100%; margin-bottom: 2%;" type="text">
            </form>
            <div style="height:230px; overflow:scroll;">
                <table class="table table-striped table-hover table-condensed" id="browser_strain_list">
                    <tbody class="searchable" id="genetic" style="overflow: scroll"></tbody>
                </table>
            </div> 
        </div>

        <div class="col-lg-4 col-md-3 col-sm-12">
            <form>
                <h3>Gene Search</h3>
                <div class="form-group">
                    <input class="form-control" id="gene-search" placeholder="Gene Search (e.g. trt-1)" style="margin-bottom: 5px;" type="text">
                </div>
            </form>    
            <h3>Tracks</h3>
            <div class="checkbox">
                <label>
                    <input class="track-select normal-track" type="checkbox" value="Genes" onload="judgeGff3()" checked>Genes
                </label>
            </div>
            <div class="checkbox">
                <label>
                    <input class="track-select normal-track" type="checkbox" value="Genes">structure variation
                </label>
            </div>
            <div class="checkbox">
                <label>
                    <input class="track-select normal-track" type="checkbox" value="Genes">copy number
                </label>
            </div>
            <div class="checkbox">
                <label>
                    <input class="track-select normal-track" type="checkbox" value="Genes">hyper divergent
                </label>
            </div>
        </div>
        <div class="col-lg-3 col-md-6" role="complementary">
            <section class="block block-block clearfix" id="block-block-5">
                <h3 class="block-title" style="text-align: center;">Genetic Summary</h3>
                <table class="datasum" style="margin: auto;" ><tr><th>Type</th><th style="text-align:right;">Records</th></tr><tr><td>Organism</td><td style="text-align:right;">91</td></tr><tr><td>Assembly</td><td style="text-align:right;">55624</td></tr><tr><td>Gene</td><td style="text-align:right;">403636</td></tr><tr><td>mRNA</td><td style="text-align:right;">402784</td></tr><tr><td>Protein</td><td style="text-align:right;">402784</td></tr><tr><td>rRNA</td><td style="text-align:right;">1548</td></tr><tr><td>tRNA</td><td style="text-align:right;">5543</td></tr><tr><td>Exon</td><td style="text-align:right;">926116</td></tr><tr><td>DAN Transposon</td><td style="text-align:right;">35162</td></tr><tr><td>LINE Element</td><td style="text-align:right;">129061</td></tr><tr><td>SINE Element</td><td style="text-align:right;">50997</td></tr><tr><td>LTR Retrotransposon</td><td style="text-align:right;">222617</td></tr><tr><td>Repeat Region</td><td style="text-align:right;">32382</td></tr></table>
            </section>
        </div >
    </div>
</div>

<div class="igv">
    <div class="container">
        <!-- igv功能模块 -->
        <div class="col-lg-12 col-md-10">
            <div id="igv-div"></div>
            <script>

                //import igv from "https://cdn.jsdelivr.net/npm/igv@2.10.4/dist/igv.esm.min.js";
                $(document).ready(function(){
                    var div = $("#igv-div")[0]
                    var igvDiv = document.getElementById("igv-div");
                    const options = {
                        reference: {
                            id: "Panda",
                            name: "Panda 2021",
                            fastaURL: "{{ .root}}/Ailuropoda_melanoleuca.ASM200744v2.dna_sm.primary_assembly.all.fa",
                            indexURL: "{{ .root}}/Ailuropoda_melanoleuca.ASM200744v2.dna_sm.primary_assembly.all.fa.fai",
                            tracks: [
                            ]
                        },
                        "locus": "2:24,949,203-24,963,009",
                    };

                    igv.createBrowser(igvDiv, options)
                        .then(function (browser) {
                            igv.browser = browser;
                            console.log("Created IGV browser");
                        })
                })
            </script>

        </div>
    </div>
</div>

{{template "footer" .}}

</body>
</html>
